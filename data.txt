
; База данных персонала «Микрошафт» содержит утверждения (assertions)
; о сотрудниках компании. Вот информация о Бене Битоборе, местном компью-
; терном гуру:

(адрес (Битобор Бен) (Сламервилл (Ридж Роуд) 10))
(должность (Битобор Бен) (компьютеры гуру))
(зарплата (Битобор Бен) 60000)

; Каждое утверждение представляет собой список (в данном случае тройку).
; элементы которого сами могут быть списками.
; В качестве местного гуру Бен отвечает за компьютерный отдел компании и
; руководит двумя программистами и одним техником. Вот информация о них:

(адрес (Хакер Лиза П) (Кембридж (Массачусетс Авеню) 78))
(должность (Хакер Лиза П) (компьютеры программист))
(зарплата (Хакер Лиза П) 40000)
(начальник (Хакер Лиза П) (Битобор Бен))

(адрес (Фект Пабло Э) (Кембридж (Эймс Стрит) 3))
(должность (Фект Пабло Э) (компьютеры программист))
(зарплата (Фект Пабло Э) 35000)
(начальник (Фект Пабло Э) (Битобор Бен))

(адрес (Поправич Дайко) (Бостон (Бэй Стейт Роуд) 22))
(должность (Поправич Дайко) (компьютеры техник))
(зарплата (Поправич Дайко) 25000)
(начальник (Поправич Дайко) (Битобор Бен))

; Имеется также программист-стажер, над которым начальствует Лиза:

(адрес (Дум Хьюго) (Сламервилл (Пайн Три Роуд) 80))
(должность (Дум Хьюго) (компьютеры программист стажер))
(зарплата (Дум Хьюго) 30000)
(начальник (Дум Хьюго) (Хакер Лиза П))

; Все эти служащие работают в компьютерном отделе, на что указывает слово
; компьютеры в начале описания их должностей.
; Бен — служащий высокого ранга. Его начальник — сам глава компании:

(начальник (Битобор Бен) (Уорбак Оливер))
(адрес (Уорбак Оливер) (Суэлсли (Топ Хип Роуд)))
(должность (Уорбак Оливер) (администрация большая шишка))
(зарплата (Уорбак Оливер) 150000)

; Помимо компьютерного отдела, руководимого Беном, в компании имеется
; бухгалтерия, где работает главный бухгалтер со своим помощником:

(адрес (Скрудж Эбин) (Уэстон (Шейди Лейн) 10))
(должность (Скрудж Эбин) (бухгалтерия главный бухгалтер))
(зарплата (Скрудж Эбин) 75000)
(начальник (Скрудж Эбин) (Уорбак Оливер))

(адрес (Крэтчит Роберт) (Олстон (Норт Гарвард Стрит) 16))
(должность (Крэтчит Роберт) (бухгалтерия писец))
(зарплата (Крэтчит Роберт) 18000)
(начальник (Крэтчит Роберт) (Скрудж Эбин))

; Есть еще секретарь главы компании:

(адрес (Фиден Кон) (Сламервилл (Онион Сквер) 5))
(должность (Фиден Кон) (администрация секретарь))
(зарплата (Фиден Кон) 25000)
(начальник (Фиден Кон) (Уорбак Оливер))

; Данные содержат также утверждения о том, какой род работы могут выпол-
; нять сотрудники, имеющие другую должность. Например, компьютерный гуру
; способен выполнять работу как компьютерного программиста, так и компью-
; терного техника:

(может-замещать (компьютеры гуру) (компьютеры программист))
(может-замещать (компьютеры гуру) (компьютеры техник))

; Программист может выполнять работу стажера:

(может-замещать (компьютеры программист)
	(компьютеры программист стажер))

; Кроме того, как всем известно,

(может-замещать (администрация секретарь)
	(администрация большая шишка))

(xxx yyy)

; -----------------------------------------------------------------------------

(совещание бухгалтерия (понедельник 9))
(совещание администрация (понедельник 10))
(совещание компьютеры (среда 15))
(совещание администрация (пятница 13))
(совещание вся-компания (среда 16))

; -----------------------------------------------------------------------------

(rule
    (живет-около ?person-1 ?person-2)
    (and
        (адрес ?person-1 (?town . ?rest-1))
        (адрес ?person-2 (?town . ?rest-2))
        (not (same ?person-1 ?person-2))))

(rule (same ?x ?x))

(rule (шишка ?person)
    (and (начальник ?middle-manager ?person)
        (начальник ?x ?middle-manager)))

(rule (can-replace ?p1 ?p2)
        (and
            (должность ?p1 ?d1)
            (должность ?p2 ?d2)
            (or
                (same ?d1 ?d2)
                (может-замещать ?d1 ?d2))
            (not (same ?p1 ?p2))))

(rule (independent ?p)
    (and
        (должность ?p (?d . ?d1))
        (not
            (and
                (должность ?p_boss (?d . ?d2))
                (начальник ?p ?p_boss)))))
(rule
    (время-совещания ?person ?day-and-time)
    (or
        (совещание вся-компания ?day-and-time)
        (and
            (должность ?person (?x . ?y))
            (совещание ?x ?day-and-time))))

(rule (append-to-form () ?y ?y))

(rule (append-to-form (?u . ?v) ?y (?u . ?z))
    (append-to-form ?v ?y ?z))

(rule (?x next-to ?y in (?x ?y . ?u)))

(rule (?x next-to ?y in (?v . ?z)) (?x next-to ?y in ?z))

(rule (= ?z ?z))

(rule
    (last-pair ?a ?b)
    (or
        (and
            (= ?a (?z))
            (= ?z ?b))
        (and
            (= ?a (?z . ?y))
            (last-pair ?y ?b)) ))

